\documentclass[a4paper,12pt]{book}

%% Package kvoptions-patch is needed if you pass unicode strings as parameters to fancydoc packages.
\usepackage{kvoptions-patch}

%% Load fancydoc package.
\usepackage[
	final=false,
	joinlists=false,
	figures=true,
	tables=true,
	listings=true,
	abbreviations=true,
	theorems=false,
	language=english,
	bibfile=bibliography.bib,
	bibencoding=utf8,
	bibstyle=philosophy-modern,
	encoding=utf8,
	titlelistings=List of Listings,
	namelistings=Listing,
	titleabbrev=List of Abbreviations,
	titletheorems=List of Theorems,
	custompicture=graphics/logos/qt.png,
	titleanot=Abstract,
	titlebookmarktitlepage=Titlepage,
	titlelists=Lists
]{fdocbook}

\usepackage{caption}
\usepackage[list=true]{subcaption}
\usepackage{placeins}
\usepackage[shortcuts]{extdash}
\usepackage[super]{nth}
\usepackage[euler]{textgreek}
\usepackage{chngcntr}

\fdoctitle{Qt: Internals and Principles}
\fdocsubtitle{Get to grips with Qt}
\fdocyear{\today}
\fdocauthor{Martin Rotter}
\fdocanot{Qt is one of the best-known and the mightiest general-purpose libraries available. Its functionality covers each and every thinkable programming area, including threading, graphical interfaces, relational databases, networks, 2D/3D painting and many more. This text aims at one modest task - providing the solid base for learning and understanding Qt by revealing its internals and principles.}

\makeatletter
\@addtoreset{chapter}{part}
\makeatother

\newcommand*\realworld{\renewcommand\theHchapter{sec.\arabic{chapter}}}

\makeatletter
\renewcommand\part{
  \if@openright
    \cleardoublepage
  \else
    \clearpage
  \fi
  \thispagestyle{empty}
  \if@twocolumn
    \onecolumn
    \@tempswatrue
  \else
    \@tempswafalse
  \fi
  \null\vfil
  \secdef\@part\@spart}
\makeatother

\makeatletter
\renewcommand\chapter{\if@openright\cleardoublepage\else\clearpage\fi
                    \thispagestyle{fancy}% original style: plain
                    \global\@topnum\z@
                    \@afterindentfalse
                    \secdef\@chapter\@schapter}
\makeatother

% start parts and sections on odd page

\newcommand{\ts}{\textsuperscript}
\newcommand{\ie}{i.\,e. }
\newcommand{\Ie}{I.\,e. }
\newcommand{\eg}{e.\,g. }
\newcommand{\Eg}{E.\,g. }

\renewcommand{\sectionautorefname}{Chapter}
\renewcommand{\subsectionautorefname}{Chapter}
\renewcommand{\subsubsectionautorefname}{Chapter}
\renewcommand{\paragraphautorefname}{Chapter}
\renewcommand{\subparagraphautorefname}{Chapter}
\renewcommand{\chapterautorefname}{Chapter}

\begin{document}
\pagestyle{empty}

% vytiskne titulní stranu
\fdoctitlesimple

% vytiskne anotaci (abstrakt)
\fdocabstract

\input{frontback/preface}

% tiskne obsah
\fdoctableofcontents

\part{Laboratory Qt}\label{part:lab}
\pagestyle{fancy}
\input{parts/laboratory/foreword}
\input{parts/laboratory/qtstructure}
\input{parts/laboratory/usingqt}
\input{parts/laboratory/compilation}
\input{parts/laboratory/global}
\input{parts/laboratory/mos}
\input{parts/laboratory/memory}
\input{parts/laboratory/events}
\input{parts/laboratory/threading}
%% vlákna - Qt::QueuedConnection - propojení se signály a sloty
%% gui
%% rss guard

\realworld
\part{Real-world Qt}\label{part:real}
\pagestyle{fancy}
\input{parts/real-world/foreword}
\input{parts/real-world/muparserx}
\input{parts/real-world/writing}
\input{parts/real-world/maintain}
\input{parts/real-world/conclusions}

%\upendoftreatise
%\fdocendofmainmatter
%\fdocappendix
%\section{First cute appendix}
%Whatever\ldots


\upendoftreatise

\upprintlists

\fdocendofmainmatter

\fdocprintbibliography
\fdocprintindex

\end{document}